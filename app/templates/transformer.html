{% extends 'layout.html' %}

{% block content %}
<input name="csrf-token" id="csrf-token" type="hidden"/>

<div class="">
    <div class="fixed top-0 left-0 w-80 h-screen bg-gray-900 p-6 z-40 shadow-lg overflow-y-auto">

        <div class="text-2xl font-bold text-white mb-6">Saved Prompts</div>

        <div class="mb-6">
            <label class="font-bold text-gray-300" for="saved-prompts">Select a Saved Prompt</label>
            <select id="saved-prompts" name="saved-prompts"
                    class="w-full mt-2 p-3 bg-gray-800 text-white rounded-md border border-gray-600 focus:outline-none focus:border-rioRed"
                    hx-post="/saved-prompts/"
                    hx-trigger="change"
                    hx-include="[name='saved-prompt']"
                    hx-target="#select-options"
                    hx-swap="outerHTML">
                <option value="" disabled selected>Select a prompt...</option>
                <option value="1">Prompt 1</option>
                <option value="2">Prompt 2</option>
                <option value="3">Prompt 3</option>
            </select>
        </div>

        <!-- This section will be replaced when the user selects a saved prompt -->
        <div id="select-options" class="mb-6">
        </div>

        <div class="my-6">
            <label class="font-bold text-gray-300" for="prompt-value">LLM Transformer Prompt</label>
            <textarea name="prompt-value" id="prompt-value"
                      rows="4"
                      class="w-full mt-2 p-3 bg-gray-800 text-white rounded-md border border-gray-600 focus:outline-none focus:border-rioRed"
                      placeholder="Enter your transformation prompt here..."></textarea>
        </div>

        <div class="flex flex-col gap-4">
            <button class="w-full py-3 bg-rioRed text-white rounded-md shadow hover:bg-rioRed-dark focus:outline-none"
                    hx-post="/transform-stories/"
                    hx-target="#output-box"
                    hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                    hx-swap="innerHTML"
                    hx-include="[name^=story-option], [name=saved-prompts], [name=prompt-value]"
                    hx-indicator="#loading-indicator">
                Apply Selected Option
            </button>
        </div>
    </div>
    <!-- Main content spanning 8 columns -->
    <div class="ml-80 g-gray-500">
        <div id="output-box" class="px-16">
        </div>
    </div>
</div>

{% endblock %}
